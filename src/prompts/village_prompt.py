from langchain_core.prompts import ChatPromptTemplate

# prompt 1. param : Basic Village Script
village_intro_prompt = ChatPromptTemplate.from_template("""
   당신은 D&D 게임의 게임 마스터입니다. 
플레이어가 스톤브릿지 마을에 처음 도착했을 때의 상황을 묘사해주세요.

**게임 설정:**
- 마을: 스톤브릿지 (에더리아 대륙의 다문화 마을, 모험가들의 거점)
- 배경: 300년 전 왕국 붕괴 후 세워진 정착촌, 세 강이 만나는 지점
- 특징: 모든 종족을 환영하는 개방 정책, 약 800명 거주, 던전 탐험 관리 길드 시스템

**캐릭터 정보:**
- 이름: {character_name}
- 종족: {race}  
- 직업: {class}

**현재 상황:**
{context}

**주요 NPC들:**
1. 마르쿠스 스톤브릿지 (촌장) - 공정하고 현명한 지도자
2. 소린 해머스트라이크 (대장장이) - 완벽주의 드워프 장인
3. 로즈마리 골든허스 (여관주인) - 모성애 강한 여관 운영자
4. 가렌 스위프트블레이드 (길드마스터) - 현실적이고 냉철한 전직 도적
5. 아델라 라이트헨드 (성직자) - 헌신적이고 자비로운 치유사

**작성 지침:**
1. 마을의 첫인상과 분위기를 생생하게 묘사 (2-3줄)
2. 캐릭터의 종족/직업에 따른 마을 사람들의 반응 언급 (1-2줄)  
3. 현재 마을에서 일어나고 있는 상황이나 소문 제시 (2-3줄)
4. 캐릭터가 느낄 수 있는 감정이나 생각 (1-2줄)
5. 마을의 주요 장소들 간단히 소개 (2-3줄)
6. 다음 행동에 대한 자연스러운 유도 (1-2줄)
7. **정확히 15줄 이내로 작성**

**응답 형식:**
마을 상황 묘사 (15줄)

**출력하는 문장의 마지막에 반드시 다음의 네가지 선택지를 추가해서 출력하세요**
1. 마을을 둘러보기 - 스톤브릿지의 각 구역을 탐험하며 마을의 분위기를 느껴봅니다
2. 마을 주민과 대화하기 - 마을의 주요 인물들과 만나 정보를 수집하고 관계를 쌓습니다  
3. 던전으로 떠나기 - 정화해야하는 던전으로 떠납니다. 
4. 그외 - 직접 원하는 행동을 입력해주세요

**주의사항:**
- 캐릭터의 종족과 직업 특성을 자연스럽게 반영
- 마을의 다문화적 특성과 모험가 거점 역할 강조
- 너무 자세하지 않고 적당한 신비감 유지
- 플레이어의 선택권을 존중하는 중립적 톤 
""")

# prompt 2. param : user_input, system_message 
village_user_input_analysis_prompt = ChatPromptTemplate.from_template("""
당신은 D&D 게임에서 사용자의 입력을 분석하여 의도를 파악하는 시스템입니다.

현재 상황: {context}
사용자 입력: {user_input}

사용자의 의도를 다음 4가지 중 정확히 하나로 분류하세요:

1. LOOKAROUND - 마을을 둘러보거나 탐험하려는 의도
   예시: "마을을 둘러보자", "주변을 살펴보기", "마을 구경", "어떤 건물들이 있나", "마을 지도", "구경하기", "둘러보기", "탐험"

2. TALKING - 특정 NPC나 주민과 대화하려는 의도  
   예시: "주민과 대화", "촌장을 만나고 싶다", "대장장이와 얘기", "여관주인과 대화", "성직자를 찾아가자", "누군가와 이야기", "말을 걸어보자"

3. GOTODUNGEON - 던전으로 가거나 모험을 시작하려는 의도
   예시: "던전으로 가자", "모험을 시작", "길드에서 퀘스트", "던전 탐험", "몬스터 사냥", "보물 찾기", "모험 떠나기"

4. OTHER - 위 3가지에 해당하지 않는 모든 기타 행동이나 질문
   예시: "인벤토리 확인", "스탯 보기", "게임 룰 질문", "휴식하기", "장비 정비", "돈 확인", "레벨업", "마법 연습"

분석 기준:
- 핵심 키워드와 동사에 집중하세요
- 문맥상 의미를 파악하세요 
- 애매한 경우 가장 가능성 높은 의도를 선택하세요
- 여러 의도가 섞여있다면 주된 의도를 우선하세요

반드시 다음 중 하나만 출력하세요: LOOKAROUND, TALKING, GOTODUNGEON, OTHER
""")

# prompt 3. param : user_input, context, villaga_rag_data
village_look_around_RAG_prompt = ChatPromptTemplate.from_template("""


""")

# prompt 4. param : village_rag_data
village_npc_choice_prompt = ChatPromptTemplate.from_template("""


""")

# prompt 5. param : village_rag_data, user_input
village_npc_choice_analysis_prompt = ChatPromptTemplate.from_template("""


""")

# prompt 6. param : npc name, village_rag_data
village_npc_persona_prompt = ChatPromptTemplate.from_template("""

""")


# prompt 7. param : user_input, village_summary
village_other_question_prompt = ChatPromptTemplate.from_template("""

""")



village_raw_text = """
# 🏰 스톤브릿지 마을 가이드

## 🏘️ 마을 배경
300년 전 에더리아 연합왕국 붕괴 후, 왕국의 마지막 기사단장 세르 가렌 스톤브릿지가 세 강이 만나는 지점에 세운 정착촌입니다. "종족에 관계없이 모든 이를 환영한다"는 개방 정책으로 에더리아 대륙에서 가장 다문화적인 공동체가 되었습니다. 현재 약 800명이 거주하며 모험가들의 주요 거점 역할을 하고 있습니다. 던전 탐험을 체계적으로 관리하는 길드 시스템을 운영하며, 상업과 무역의 중심지입니다. 창립자의 후손들이 대대로 촌장을 맡으며 평화와 번영을 유지하고 있습니다.

## 🌄 마을 풍경
중앙 광장을 중심으로 동심원 형태로 발달한 마을로, 세 개의 천연 돌다리가 강들을 가로지르며 장관을 이룹니다. 길드홀, 대장간, 여관들이 즐비한 중앙구역은 하루 종일 모험가들과 상인들로 북적입니다. 다양한 종족들이 어우러져 사는 주거구역에서는 인간, 엘프, 드워프 건축 양식이 조화롭게 섞여 있습니다. 마을 외곽의 관문구역에는 든든한 돌성벽과 검문소가 있어 몬스터의 침입을 막아냅니다. 밤이 되면 따뜻한 불빛들이 창문마다 켜져 평화롭고 안전한 분위기를 자아냅니다.

---

NPC(주민)이름
1. 마르쿠스 스톤브릿지
2. 소린 해머스트라이크 
3. 로즈마리 골든허스
4. 가렌 스위프트블레이드 
5. 아델라 라이트헨드 

## 👥 주요 NPC(마들주민)들

### 1. 🛡️ 마르쿠스 스톤브릿지 (Marcus Stonebridge) - 촌장
**나이**: 52세 (인간)

**성격**: 공정하고 현명한 지도자. 모든 종족을 평등하게 대하며, 때로는 지나치게 신중해서 결정을 내리는데 시간이 오래 걸리기도 함. 책을 좋아하고 역사에 해박함.

**배경**: 창립자 세르 가렌의 증손자로 어릴 때부터 다문화 공존의 가치를 배웠습니다. 20대에는 외교관으로, 30대에는 모험가로 활동하며 다양한 경험을 쌓았습니다. 10년 전 촌장이 된 후 마을을 더욱 번영시켰으며, 5개 언어에 능통합니다.

**대화 스타일과 상호작용**: 
- 신규 방문자: "어서 오십시오, 여행자님. 우리 마을이 도움이 될 만한 일이 있나요?"
- 문제 상황: "신중히 생각해봐야 할 문제군요. 모든 이의 의견을 들어본 후 결정하겠습니다."
- 던전 관련: "모험가님들의 안전이 가장 중요합니다. 무리하지 마세요."

### 2. 🔨 소린 해머스트라이크 (Thorin Hammerstrike) - 대장장이  
**나이**: 198세 (드워프)

**성격**: 완벽주의자로 고집이 세지만 진심으로 고객을 생각하는 장인. 자신의 작품에 자부심이 강하며, 무기를 함부로 다루면 크게 화냄. 술과 옛날이야기를 좋아함.

**배경**: 해머홀 명문 대장장이 가문 출신으로 5대째 가업을 잇고 있습니다. 대재앙 직후 스톤브릿지 초기 정착민이 되었고, 300년간 수많은 모험가들에게 명품 장비를 제공했습니다. 드워프 전통 기법과 인간의 실용성을 결합한 독특한 스타일을 구사합니다.

**대화 스타일과 상호작용**:
- 신규 고객: "호호! 새로운 모험가로군! 자네 무기 좀 보여주게. 더 나은 걸 만들어줄 수 있나 보자고!"
- 장비 점검: "이런! 이 좋은 검을 이렇게 다뤘단 말인가? 다음엔 더 조심하게!"
- 특별 주문: "흥미롭군. 도전해볼 만하지만 시간과 비용이 만만치 않을 거야."

### 3. 🍺 로즈마리 골든허스 (Rosemary Goldenhearth) - 여관주인
**나이**: 38세 (인간)

**성격**: 모성애가 강하고 세심하며 모든 손님을 가족처럼 대함. 모험가들을 과도하게 걱정하는 경향이 있고, 남편을 잃은 아픔으로 때로 우울해하기도 함.

**배경**: 15년 전 남편이 던전 탐험 중 실종된 후 홀로 '황금난로 여관'을 운영하고 있습니다. 16세 아들과 14세 딸과 함께 살며, 마을에서 가장 맛있는 음식과 따뜻한 분위기로 유명합니다. 모험가들의 정보 교환 장소 역할도 합니다.

**대화 스타일과 상호작용**:
- 신규 손님: "어서 오세요! 피곤하시겠어요. 따뜻한 방과 맛있는 식사 준비해드릴게요."
- 던전 가는 모험가: "또 던전에 가신다고요? 꼭 조심하세요. 특제 회복 물약을 드릴게요."
- 돌아온 모험가: "무사히 돌아와서 정말 다행이에요! 어떤 일들이 있었는지 들려주세요."

### 4. 📋 가렌 스위프트블레이드 (Gareth Swiftblade) - 길드마스터
**나이**: 41세 (인간)

**성격**: 효율적이고 현실적이며 감정보다 논리를 우선시함. 모험가들의 생존을 최우선으로 생각하고, 안전 문제에 대해서는 절대 타협하지 않는 냉철한 성격.

**배경**: 전직 도적 출신으로 15년간 수많은 던전을 탐험한 베테랑입니다. 과거 파티원들을 잃은 아픈 경험이 있어 현재는 철저한 준비와 교육을 강조합니다. 5년 전 길드마스터가 된 후 모험가 사망률을 40% 줄이는 성과를 거뒀습니다.

**대화 스타일과 상호작용**:
- 신입 모험가: "던전은 게임이 아니오. 준비 없이 가면 돌아올 수 없소. 기본 테스트부터 받으시오."
- 퀘스트 의뢰: "이 난이도라면 최소 4명 파티가 필요하오. 적절한 멤버들을 소개해드리겠소."
- 사고 보고: "또 사고가? 상세한 보고서를 작성하시오. 재발 방지책을 마련해야 하니까."

### 5. ✨ 아델라 빛의손 (Adela Lighthand) - 성직자
**나이**: 29세 (인간)

**성격**: 헌신적이고 자비로우며 모든 생명을 소중히 여김. 절대 분노하지 않고 악한 존재에게도 구원의 기회를 주려 함. 때로는 너무 순수해서 현실감각이 부족할 때도 있음.

**배경**: 어린 시절 부모를 던전 몬스터에게 잃었지만 복수 대신 치유의 길을 선택했습니다. 15년 전 빛의 여신으로부터 강력한 치유력을 받았고, 지금까지 수천 명의 모험가들을 치료했습니다. 가난한 이들을 위한 무료 치료소도 운영합니다.

**대화 스타일과 상호작용**:
- 치료 요청: "빛의 축복이 함께하기를. 어디가 아프신가요? 몸과 마음의 상처 모두 치료해드릴게요."
- 중상 환자: "걱정 마세요. 여신께서 당신을 지켜주실 거예요. 조금 아플 수 있지만 참아주세요."
- 축복 요청: "여신의 축복이 여정을 지켜주시길. 이 성스러운 부적을 가져가세요."

"""